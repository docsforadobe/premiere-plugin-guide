# tmModule Functions

Fill in 0 for any unsupported calls. Thread safety is defined per-module, only a single thread will enter a module at a time.

| **Member**                                                                                                                                                                                                                   | **Description**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `Startup`<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>                                                                                                      | Initialize a transmitter, fill in basic plugin info, allocate memory to hold user settings and other data.<br/><br/><br/><br/><br/>::<br/><br/><br/><br/><br/>tmResult (\*Startup)(<br/><br/><br/>tmStdParms\* ioStdParms,<br/><br/><br/>tmPluginInfo\* outPluginInfo);<br/><br/><br/><br/><br/>`tmResult_ContinueIterate` may be returned to support multiple transmit plugins within the same module.<br/><br/><br/><br/><br/>`ioPrivatePluginData`, `ioSerializedPluginData` & `ioSerializedPluginDataSize` may be written from Startup.<br/><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `Shutdown`<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>                                                                                                                                   | Terminate a transmitter.<br/><br/><br/><br/><br/>::<br/><br/><br/><br/><br/>tmResult (\*Shutdown)(<br/><br/><br/>tmStdParms\* ioStdParms);<br/><br/><br/><br/><br/>Dispose of `ioPrivatePluginData` if previously allocated in `Startup`.<br/><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `QueryAudioMode`<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>                                                                                               | Describe the audio modes supported by the transmitter, one at a time.<br/><br/><br/><br/><br/>::<br/><br/><br/><br/><br/>tmResult (\*QueryAudioMode)(<br/><br/><br/>const tmStdParms\* inStdParms,<br/><br/><br/>const tmInstance\* inInstance,<br/><br/><br/>csSDK_int32 inQueryIterationIndex,<br/><br/><br/>tmAudioMode\* outAudioMode);<br/><br/><br/><br/><br/>Note that currently one audio mode is currently supported. You can convert between audio formats using the [Audio Suite](../universals/sweetpea-suites.md#universals-sweetpea-suites-audio-suite).<br/><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| `QueryVideoMode`<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>                                                                                               | Describe the video modes supported by the transmitter, one at a time.<br/><br/><br/><br/><br/>::<br/><br/><br/><br/><br/>tmResult (\*QueryVideoMode)(<br/><br/><br/>const tmStdParms\* inStdParms,<br/><br/><br/>const tmInstance\* inInstance,<br/><br/><br/>csSDK_int32 inQueryIterationIndex,<br/><br/><br/>tmVideoMode\* outVideoMode);<br/><br/><br/><br/><br/>The video sent later in `PushVideo` will be one of the formats specified here.<br/><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `SetupDialog`<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>                                                                              | Display your own modal settings dialog.<br/><br/><br/><br/><br/>::<br/><br/><br/><br/><br/>tmResult (\*SetupDialog)(<br/><br/><br/>tmStdParms\* ioStdParms,<br/><br/><br/>prParentWnd inParent);<br/><br/><br/><br/><br/>Will only be called if the plugin returned `outHasSetup`.<br/><br/><br/><br/><br/>Save any settings to `ioSerializedPluginData` and if needed update `ioSerializedPluginDataSize`.<br/><br/><br/><br/><br/>`NeedsReset` will be invoked after this call, to allow your transmitter a chance to reset all open plugins and startup with the new settings.<br/><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `NeedsReset`<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>                                                                                                   | Will be called regularly on the first plugin of a module to allow rebuilding on state changes.<br/><br/><br/><br/><br/>::<br/><br/><br/><br/><br/>tmResult (\*NeedsReset)(<br/><br/><br/>const tmStdParms\* inStdParms,<br/><br/><br/>prBool\* outResetModule);<br/><br/><br/><br/><br/>If the passed in settings differ enough from the created settings, or if the settings on the hardware itself have changed, the transmitter should specify a reset is needed.<br/><br/><br/><br/><br/>If `outResetModule` is set to true, all open plugins will be shutdown and started up again.<br/><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `CreateInstance`<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>                                                                           | Creates an instance of a transmitter.<br/><br/><br/><br/><br/>::<br/><br/><br/><br/><br/>tmResult (\*CreateInstance)(<br/><br/><br/>const tmStdParms\* inStdParms,<br/><br/><br/>tmInstance\* ioInstance);<br/><br/><br/><br/><br/>`inPlayID` and `inTimelineID` may be 0 if not driven by a player.<br/><br/><br/><br/><br/>Multiple instances may be created at the same time.<br/><br/><br/><br/><br/>Allocate `ioPrivateInstanceData`.<br/><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `DisposeInstance`<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>                                                                                                                  | Dispose an instance of a transmitter.<br/><br/><br/><br/><br/>::<br/><br/><br/><br/><br/>tmResult (\*DisposeInstance)(<br/><br/><br/>const tmStdParms\* inStdParms,<br/><br/><br/>tmInstance\* ioInstance);<br/><br/><br/><br/><br/>Any `ioPrivateInstanceData` should be disposed.<br/><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| `ActivateDeactivate`<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>                                                             | Activate or deactivate a transmitter instance, for example during application suspend or switching between monitors.<br/><br/><br/><br/><br/>::<br/><br/><br/><br/><br/>tmResult (\*ActivateDeactivate)(<br/><br/><br/>const tmStdParms\* inStdParms,<br/><br/><br/>const tmInstance\* inInstance,<br/><br/><br/>PrActivationEvent inActivationEvent,<br/><br/><br/>prBool inAudioActive,<br/><br/><br/>prBool inVideoActive);<br/><br/><br/><br/><br/>Transmitters should manage hardware access with these calls, not `Startup`/`Shutdown`, since it is valid for multiple plugins to be simultaneously active for the same device.<br/><br/><br/><br/><br/>Audio and video may be independently activated.<br/><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `StartPlaybackClock`<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/> | Start a clock for playback.<br/><br/><br/><br/><br/>::<br/><br/><br/><br/><br/>tmResult (\*StartPlaybackClock)(<br/><br/><br/>const tmStdParms\* inStdParms,<br/><br/><br/>const tmInstance\* inInstance,<br/><br/><br/>const tmPlaybackClock\* inClock);<br/><br/><br/><br/><br/>This will be sent not only when starting playback, but also for scrubbing.<br/><br/><br/><br/><br/>Will only be called if the transmitter returned `outHasClock`.<br/><br/><br/><br/><br/>The provided callback must be called each time the time changes, for example once for each frame in response to `PushVideo`.<br/><br/><br/><br/><br/>Start may be called multiple times without a stop in between to update playback parameters, for example if the speed changes during playback.<br/><br/><br/><br/><br/>Invoke the callback immediately during `StartPlaybackClock` with a negative number for preroll but do not use this to wait for frames.<br/><br/><br/><br/><br/>If video latency is specified, up to the latency’s amount of frame marked as `playmode_Playing` will be sent before `StartPlaybackClock` is called.<br/><br/>                                                                                                                     |
| `StopPlaybackClock`<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>                                                                                                                                    | Stop a clock for playback.<br/><br/><br/><br/><br/>::<br/><br/><br/><br/><br/>tmResult (\*StopPlaybackClock)(<br/><br/><br/>const tmStdParms\* inStdParms,<br/><br/><br/>const tmInstance\* inInstance);<br/><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `PushVideo`<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>          | Asynchronously pushes a video frame to a transmitter instance.<br/><br/><br/><br/><br/>::<br/><br/><br/><br/><br/>tmResult (\*PushVideo)(<br/><br/><br/>const tmStdParms\* inStdParms,<br/><br/><br/>const tmInstance\* inInstance,<br/><br/><br/>const tmPushVideo\* inPushVideo);<br/><br/><br/><br/><br/>Will only be called if the transmitter returned `outHasVideo`.<br/><br/><br/><br/><br/>The list of video frames passed to the transmitter will be negotiated based on the properties returned from `QueryVideoMode`.<br/><br/><br/><br/><br/>The transmitter is responsible for disposing of all passed in `PPixes`.<br/><br/><br/><br/><br/>The instance will be created with the properties of the creating video segments which may differ from the actual frames that will be sent to the transmitter.<br/><br/><br/><br/><br/>For example, if a sequence is being played at 1/2 resolution, the instance will be created with the dimensions of the sequence, but the frames rendered and sent to the transmitter will be at 1/2.<br/><br/><br/><br/><br/>These properties may change by segment, for example if your transmitter supports multiple pixel formats, different segments may render to different pixel formats.<br/><br/> |
| `StartPushAudio`<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>                                             | Asynchronously pushes audio samples to a transmitter instance.<br/><br/><br/><br/><br/>::<br/><br/><br/><br/><br/>tmResult (\*StartPushAudio)(<br/><br/><br/>const tmStdParms\* inStdParms,<br/><br/><br/>const tmInstance\* inInstance,<br/><br/><br/>PrTime inStartTime,<br/><br/><br/>PrTime inOutTime,<br/><br/><br/>prBool inLoop,<br/><br/><br/>prBool inScrubbing,<br/><br/><br/>csSDK_int32\* outSamplesPerFrame);<br/><br/><br/><br/><br/>Initializes the device for subsequent PushAudio() calls. Will only be called if the transmitter returned `outPushAudioAvailable`.<br/><br/><br/>Device will be enabled for a “secondary” mode where audio from the “primary” or “clock” device, is pushed to a secondary device; very useful for remote devices.<br/><br/><br/>Unlick StartPlaybackClock(), StartPushAudio() is only called once, until StopPushAudio() is called.<br/><br/>                                                                                                                                                                                                                                                                                                                                                         |
| `PushAudio`<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>                                                                                                                                  | Asynchronously pushes audio samples to a transmitter instance.  Note: PushAudio() may be called even if another API is called at the same time.<br/><br/><br/><br/><br/>::<br/><br/><br/><br/><br/>tmResult (\*PushAudio)(<br/><br/><br/>const tmStdParms\* inStdParms,<br/><br/><br/>const tmInstance\* inInstance,<br/><br/><br/>const tmPushAudio\* inPushAudio);<br/><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `StopPushAudio`<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>                                                                                                                                        | StopPushAudio() is called when playback via PushAudio() ends.<br/><br/><br/><br/><br/>::<br/><br/><br/><br/><br/>tmResult (\*StopPushAudio)(<br/><br/><br/>const tmStdParms\* inStdParms,<br/><br/><br/>const tmInstance\* inInstance);<br/><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| `SetStreamingStateChangedCallback`<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>                                                                                                           | Set the host callback for notification streaming state changes, i.e. when the plug-in becomes active or inactive due to changes connections   or enablement from the host.<br/><br/><br/><br/><br/>::<br/><br/><br/><br/><br/>tmResult (\*SetStreamingStateChangedCallback)(<br/><br/><br/>const tmStdParms\* inStdParms,<br/><br/><br/>void\* inContext,<br/><br/><br/>tmStreamingStateChangedCallback inCallback);<br/><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `EnableStreaming`<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>                                                                                                                                      | Enable/disable streaming to connected clients without loading or unloading the plug-in.<br/><br/><br/><br/><br/>::<br/><br/><br/><br/><br/>tmResult (\*EnableStreaming)(<br/><br/><br/>const tmStdParms\* inStdParms,<br/><br/><br/>prBool            inEnabled);<br/><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| `IsStreamingEnabled`<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>                                                                                                                                   | Returns whether streaming is enabled.<br/><br/><br/><br/><br/>::<br/><br/><br/><br/><br/>tmResult (\*IsStreamingEnabled)(<br/><br/><br/>const tmStdParms\* inStdParms,<br/><br/><br/>prBool\*           outEnabled);<br/><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| `IsStreamingActive`<br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>                                                                                                                                    | Returns whether the plug-in is actively streaming, i.e. streaming is enabled and the plug-in has active connections.<br/><br/><br/><br/><br/>::<br/><br/><br/><br/><br/>tmResult (\*IsStreamingActive)(<br/><br/><br/>const tmStdParms\* inStdParms,<br/><br/><br/>prBool\*           outActive);<br/><br/>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
